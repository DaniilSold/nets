# ADR 0004: SQLite + AES-GCM для хранения

## Решение
Использовать SQLite (file-based) с приложенным шифрованием (AES-256-GCM) поверх файлового уровня.

## Контекст
* Требуется офлайн хранение, отсутствие внешних БД.
* Данные чувствительны (привязка процессов и хостов).

## Альтернативы
* PostgreSQL/Firebird — избыточно тяжёлые, требуют сервис.
* Plain JSON/Parquet файлы — сложно обеспечить целостность и индексацию.

## Обоснование
SQLite компактна, кроссплатформенна, поддерживает индексы. Шифрование на уровне приложения позволяет использовать стандартную `rusqlite`.

## Последствия
* Нужно управлять ключами: Linux (`libsecret`), Windows (DPAPI), macOS (Keychain).
* AES-GCM требует выделения 12-байтовых nonce; используем счётчик per- запись (TBD в реализации).
